<!doctype html><html lang=zh-cn dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>简悦+Logseq 搭建本地化个人知识库 | Samwei12's blog</title>
<meta name=keywords content="简悦,Logseq,PKM,稍后读"><meta name=description content="最近在少数派上看到了 简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。
不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/utilities/%E7%AE%80%E6%82%A6-logseq-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=http://localhost:1313/posts/utilities/%E7%AE%80%E6%82%A6-logseq-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="简悦+Logseq 搭建本地化个人知识库"><meta property="og:description" content="最近在少数派上看到了 简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。
不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/utilities/%E7%AE%80%E6%82%A6-logseq-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-21T22:14:04+00:00"><meta property="article:modified_time" content="2022-03-21T22:14:04+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="简悦+Logseq 搭建本地化个人知识库"><meta name=twitter:description content="最近在少数派上看到了 简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。
不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"简悦+Logseq 搭建本地化个人知识库","item":"http://localhost:1313/posts/utilities/%E7%AE%80%E6%82%A6-logseq-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"简悦+Logseq 搭建本地化个人知识库","name":"简悦\u002bLogseq 搭建本地化个人知识库","description":"最近在少数派上看到了 简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。\n不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。\n","keywords":["简悦","Logseq","PKM","稍后读"],"articleBody":"最近在少数派上看到了 简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。\n不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。\n核心配置步骤 因为原文已经写的非常详细了，所以这里我不再一一列举配置，而是仅把本地化配置需要注意的事项标注出来。\n安装同步与导出工具 这里坚果云不再是必选项，而是任意本地目录即可，注意必须要保证目录结构为 xx/SimpRead 才行，这个是硬性要求，否则会无法使用简悦的本地知识库功能。其实只需要在同步文件夹里选择一个名为 SimpRead 的文件夹即可，导出部分使用默认\n详细服务设定参考原文，全部打开。\n关于简悦知识库相关内容，可以查阅官方文档 建立知识库\n通用\u0026高级 自动同步相关参考原文，不需要做改动（也不需要覆盖本地配置文件这一步） 标注部分保持一致，确保导出时候一定要选 全文（含标注）+标注 服务 这里是配置大头，也是容易出错的地方，重点说一下。\n【授权】\n因为没有用坚果云，这里可以不用关心授权 【定制导出】\n自定义标题一定要开，这个也是知识库使用的前提，同时标题必须要保证是 {{id}}{{un_title}}{{mode}} (这个主要是为了后面稍后读能够加载本地文件) 模板部分，我个人做了一定的改动，这个可以自定义 tags:: #[[SimpRead]] {{tags}} type:: [[Literature Notes]] time:: [[{{date_format|now|yyyy-MM-dd}} ]] source:: [{{title}}]({{url}}) desc:: {{desc}} {{#each}} - \u003e [📌](\u003c{{an_int_uri}}\u003e) {{an_html}} {{ - |an_note}}{{an_tags}} {{/each}} 主要改动包括：\n添加部分元数据，用于 Logseq 的 query 功能，例如： type、tags、time 等 标注部分把原文放在前面，同时加引文标识，自己的话放在后面，且添加缩进 效果图：\n这里一定要注意，[[{{date_format|now|yyyy-MM-dd}} ]] 后面是有一个空格的，它不是作者笔误，而是必须要这样才能正常添加时间戳，参见： 定制导出 ， 增强导出（保持原文配置） 自动化 这里有一个坑花了我三天时间，必须要重点讲一下。\n但这里更建议是保存为 Textbundle 格式，因为离线 HTML 需要将图片转译为 Base64 的代码，碰到多图杀猫的文章很容易卡顿或失败。\n因此在自动化中，我导出了 HTML、Markdown、Textbundle，结果就是，尝试了各种方案，包括数次卸载重装、排查本地端口占用、卸载同步助手重装等，都无法成功在本地使用 http://localhost:7026/reading/ 跳转文件，一直提示 404， ，中间尝试了各种方案，一度怀疑是否只能使用坚果云才能用知识库功能。 结果发现全部卸载重装之后，坚果云也无法使用，中间联系简悦作者 Kenshin 排查了很久，最终发现是因为同步助手无法识别 .textbundle 文件，导致不能正常建立索引。\n这个问题有两种解决方案： 1. 放弃 Textbundle，改为使用离线 HTML 2. 通过文件规则，将 .textbundle 格式文件移动到其他目录下。我选择了第二种，原因就是离线 HTML 下载容易造成卡顿。不过遇到了另一个问题，那就是 Hazel 实在是太快了，在简悦刚开始创建 Textbundle 文件的时候，就已经把文件夹挪到了其他文件，导致此时简悦正在下载的图片找不到存放目录，引发大量报错。这个问题也卡了我不少时间，具体解决方案稍后单独介绍。\n关于这部分，Kenshin 戏称说这个 issue 的长度可以在 2000 个 issue 里面排到前五，过程确实比较曲折，我中间走了非常多的弯路（不然也不会花掉一个周末的时间折腾），一度都想卸载简悦放弃了。有兴趣的同学可以看一下 自定义导出无法使用稍后读加载本地缓存文件 · Issue #3554 · Kenshin/simpread\n第二个坑，这里原文作者也有提到，那就是稍后读的自动化流程，必须要在阅读模式下才可以，否则不生效， 参考： 部分操作方式加入稍后读时，无法触发自动化 · Discussion #2362 · Kenshin/simpread\n开放平台（本地方案不需要，跳过） 定制导出 这里一定要注意： 必须要跟原作者保持一致， http://localhost:7026/reading/ 路径是简悦知识库必须的配置，否则会导致链接无法跳转以及稍后读无法使用本地缓存文件。 另一个问题就是简悦存在 bug，刷新完一定要检查一下配置是否符合预期 稍后读后台设置 基本保持一致，唯一一个小改动点就是 ，因为我只用简悦来进行深度阅读，并不需要在这里查看标注，所以通常都是进入阅读模式。 MD 文件自动移动（保持一致，使用 Hazel 即可，实际上后面我放弃了使用 Hazel） 至此，整个核心配置基本就已经完成了，我们实现的功能包括：\n添加标注自动保存 HTML、Markdown 到 output 文件夹 标注文件自动移动到 Logseq 目录中 稍后读自动加载本地缓存 HTML 文件 优化点 Textbundle永久保存方案（Mac、Linux 适用） 接着上面提到的，详细展开一下如何处理 Textbundle 文件。\n首先，我一下子想到的就是利用 Hazel，新建一个规则就可以，当我实际上这么操作的时候，发现遇到了简悦写入图片时文件夹已经被移动导致报错问题。\n此时，我的思路是，如果有办法能够延长移动文件夹的速度就好了。但简悦跟 Hazel 是相互不知道的，很可惜的是 Hazel 中也没有配置延迟操作或者定时任务这一功能，那么我们只能想办法自己动手了（当然这里还有一条路，希望简悦后续的文件写入能够先把图片下载完，之后再生成文件夹）。\n我想到的解决方案是使用 *nix 系统的 cron 功能，不了解的小伙伴可以看一下 linux - Why is my crontab not working, and how can I troubleshoot it? - Server Fault ，非常详细的介绍了 cron crontab 分别是什么， 如何使用，以及如何排查错误，受益匪浅。\n这里需要做的事情非常简单，将所有后缀为 .textbundle 的文件移动到另一个目录中，实际操作起来并不简单，因为 mv 命令无法直接移动文件夹，而 textbundle 其实是一个文件夹而不是文件，包括了 json、图片以及 markdown，所以第一步就卡住了。我改为使用 rsync 来实现这个功能，可以很方便的把某个目录下所有的 Textbundle 移动到另一个目录。之后我们把源文件夹中的 Textbundle 文件删除。这里由于无法使用 Hazel 实现全部功能，那我干脆把移动 @annotate.md 文件的部分也放在自己的脚本里面实现了。完整的脚本文件如下：\n#!/bin/bash cd 你的目录/SimpRead mv output/*@annote.md Logseq目录/SimpleRead/ rsync -axvP output/*.textbundle archieves（存放 Textbundle 的目录） rm -rf output/*.textbundle 可以直接新建一个 simpread.sh 之后把上面的代码粘贴过去，记得把上面中文说明的部分都替换掉，同时为了手动执行方便，可以 chmod +x simpread.sh 一下。\n然后就是使用 cron 让电脑自动执行这个脚本，这里可以使用 Crontab.guru - The cron schedule expression editor 这个网站调试一下定时任务，比如我目前的配置是每隔 5 分钟执行一次脚本。注意不能执行太频繁，否则一样会遇到简悦下载出错（5 分钟也不能保证完全不出错，理论上间隔越久，出错概率越小）。\n具体的添加步骤（我是 Mac，以下请在命令行中执行）\nexport EDITOR='vi' (不是必须) crontab -e 然后输入 */5 * * * * /bin/sh 你的简悦目录/SimpRead/simpread.sh 之后输入 :wq 保存即可 提示： 就代表定时任务添加成功，可以把 Hazel 卸载掉了。\n快速进入稍后读 看到简悦同步助手里面有如何快速打开稍后读的方式，参见： 稍后读 ，我就琢磨了一下，感觉效率还可以再提高一下。\n配置快捷方式 文档中把快捷方式跟独立窗口分开成两步，实际上 Chrome 浏览器支持直接创建一个独立窗口的 PWA 应用（关于 PWA，参考： Progressive web apps (PWAs) | MDN）。\n打开稍后读： 选择独立窗口：\n然后你可以在用户目录下找到它\n也可以通过 Alfred 或者 Spotlight 找到它\nManico 配置快速跳转 这里不得不强推一个效率软件了，官方网站： Manico - macOS 下的快速 App 切换器\n基本上可以说这个软件是我目前每天使用频率最高的软件，应该没有之一，大概是 18 年左右 25￥购入。它的主要作用就是快速切换软件，比如你可以配置 option+1 打开 Chrome，option+2 打开微信等等，而且再次点击快捷键可以隐藏该软件，能够极大的节约软件切换的时间。这虽然是一款付费软件，但绝对是我在 Mac 上买过的最物超所值的软件。\n核心配置：快速隐藏应用 如何配置稍后读快速打开隐藏： 总结 我一般的处理流程是手机浏览公众号或者 RSS 初筛到 Cubox，之后电脑上打开 Cubox，跳转到简悦进行深度阅读，添加标注，同步到 Logseq，之后进行定期整理。\n这样，整个从文章到标注，到 Logseq 整理的过程就打通了。简悦作为一个稍后读软件，最大的亮点就是作为一个粘合剂，可以很好地跟各种笔记类软件打通，称为知识管理工作流中不可或缺的一部分，把浏览阅读到的信息和知识真正的经过深度阅读，让它有机会融入到已有的知识体系中，内化为自己的东西，就这一点已经远远超越了 Evernote、Cubox、Pinbox 等同类剪藏产品。\n不过简悦问题也很明显，太极客了，配置使用成本巨高无比，我身为一个程序员，都好几次尝试无果弃坑了，个人感觉它的功能已经足够强大了，希望作者能够多花点心思在交互跟实际使用体验上，真的不需要再加那么多新功能了，适当的做减法非常有必要。希望我的踩坑经历能够对你有一些帮助。\n","wordCount":"3494","inLanguage":"zh-cn","datePublished":"2022-03-21T22:14:04Z","dateModified":"2022-03-21T22:14:04Z","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/utilities/%E7%AE%80%E6%82%A6-logseq-%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%9F%A5%E8%AF%86%E5%BA%93/"},"publisher":{"@type":"Organization","name":"Samwei12's blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Stay hungry, stay foolish. (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Stay hungry, stay foolish.</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">简悦+Logseq 搭建本地化个人知识库</h1><div class=post-meta><span title='2022-03-21 22:14:04 +0000 UTC'>2022.03.21 22:14:04</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;3494 words</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#核心配置步骤>核心配置步骤</a><ul><li><a href=#安装同步与导出工具>安装同步与导出工具</a></li><li><a href=#通用高级>通用&高级</a></li><li><a href=#服务>服务</a></li><li><a href=#增强导出保持原文配置>增强导出（保持原文配置）</a></li><li><a href=#自动化>自动化</a></li><li><a href=#开放平台本地方案不需要跳过>开放平台（本地方案不需要，跳过）</a></li><li><a href=#定制导出>定制导出</a></li><li><a href=#稍后读后台设置>稍后读后台设置</a></li><li><a href=#md-文件自动移动保持一致使用-hazel-即可实际上后面我放弃了使用-hazel>MD 文件自动移动（保持一致，使用 Hazel 即可，实际上后面我放弃了使用 Hazel）</a></li></ul></li><li><a href=#优化点>优化点</a><ul><li><a href=#textbundle永久保存方案maclinux-适用>Textbundle永久保存方案（Mac、Linux 适用）</a></li><li><a href=#快速进入稍后读>快速进入稍后读</a></li><li><a href=#配置快捷方式>配置快捷方式</a></li><li><a href=#manico-配置快速跳转>Manico 配置快速跳转</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><p>最近在少数派上看到了 <a href=https://sspai.com/post/72022>简悦 +Logseq 个人知识库搭建 | 从零开始完全指南 - 少数派</a>， 一时间感觉打开了新世界，其实我很早就买了简悦 2.0，但由于一直没有很好的使用场景，外加配置实在过于复杂， 始终吃灰。直到看到这篇文章，发现原来简悦也可以直接跟 Logseq 打通，那么稍后读的最大弊端终于有了完美的解决方案。</p><p>不过实际按照教程配置的过程中，发现原作者是基于坚果云搭建的，不符合我本地化的思路（主要是公司不允许用云盘），因此尝试摸索一个本地任意文件夹均可实现的方案，过程中踩了非常多的坑，记录下来，希望对大家有帮助。</p><h2 id=核心配置步骤>核心配置步骤<a hidden class=anchor aria-hidden=true href=#核心配置步骤>#</a></h2><p>因为原文已经写的非常详细了，所以这里我不再一一列举配置，而是仅把本地化配置需要注意的事项标注出来。</p><h3 id=安装同步与导出工具>安装同步与导出工具<a hidden class=anchor aria-hidden=true href=#安装同步与导出工具>#</a></h3><p>这里坚果云不再是必选项，而是任意本地目录即可，注意必须要保证目录结构为 <code>xx/SimpRead</code> 才行，这个是硬性要求，否则会无法使用简悦的本地知识库功能。其实只需要在同步文件夹里选择一个名为 SimpRead 的文件夹即可，导出部分使用默认</p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321222459.png alt=20220321222459></p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321222627.png alt=20220321222627></p><p>详细服务设定参考原文，全部打开。</p><blockquote><p>关于简悦知识库相关内容，可以查阅官方文档 <a href=https://kb.simpread.pro/#/page/%E5%BB%BA%E7%AB%8B%E7%9F%A5%E8%AF%86%E5%BA%93>建立知识库</a></p></blockquote><h3 id=通用高级>通用&高级<a hidden class=anchor aria-hidden=true href=#通用高级>#</a></h3><ul><li>自动同步相关参考原文，不需要做改动（也不需要覆盖本地配置文件这一步）</li><li>标注部分保持一致，确保导出时候一定要选 <code>全文（含标注）+标注</code></li></ul><h3 id=服务>服务<a hidden class=anchor aria-hidden=true href=#服务>#</a></h3><p>这里是配置大头，也是容易出错的地方，重点说一下。</p><p>【授权】</p><ul><li>因为没有用坚果云，这里可以不用关心授权</li></ul><p>【定制导出】</p><ul><li>自定义标题一定要开，这个也是知识库使用的前提，同时标题必须要保证是 <code>{{id}}{{un_title}}{{mode}}</code> (这个主要是为了后面稍后读能够加载本地文件)</li><li>模板部分，我个人做了一定的改动，这个可以自定义</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>tags:: #[[SimpRead]] {{tags}}
</span></span><span class=line><span class=cl>type:: [[Literature Notes]]
</span></span><span class=line><span class=cl>time:: [[{{date_format|now|yyyy-MM-dd}} ]]
</span></span><span class=line><span class=cl>source:: [<span class=nt>{{title}}</span>](<span class=na>{{url}}</span>) 
</span></span><span class=line><span class=cl>desc:: {{desc}}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{{#each}}
</span></span><span class=line><span class=cl><span class=k>-</span> &gt; [<span class=nt>📌</span>](<span class=na>&lt;{{an_int_uri}}&gt;</span>) {{an_html}}
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>{{  - |an_note}}{{an_tags}}
</span></span><span class=line><span class=cl>{{/each}}
</span></span></code></pre></div><p>主要改动包括：</p><ul><li>添加部分元数据，用于 Logseq 的 query 功能，例如： type、tags、time 等</li><li>标注部分把原文放在前面，同时加引文标识，自己的话放在后面，且添加缩进</li></ul><p>效果图：</p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321223653.png alt=20220321223653></p><p>这里一定要注意，<code>[[{{date_format|now|yyyy-MM-dd}} ]]</code> 后面是有一个空格的，它不是作者笔误，而是必须要这样才能正常添加时间戳，参见： <a href="http://ksria.com/simpread/docs/#/%E5%AE%9A%E5%88%B6%E5%8C%96%E5%AF%BC%E5%87%BA?id=markdown">定制导出</a> ，<img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321224231.png alt=image-20220321224231231></p><h3 id=增强导出保持原文配置>增强导出（保持原文配置）<a hidden class=anchor aria-hidden=true href=#增强导出保持原文配置>#</a></h3><h3 id=自动化>自动化<a hidden class=anchor aria-hidden=true href=#自动化>#</a></h3><p>这里有一个坑花了我三天时间，必须要重点讲一下。</p><blockquote><p>但这里更建议是保存为 <a href=http://textbundle.org/>Textbundle </a>格式，因为离线 HTML 需要将图片转译为 Base64 的代码，碰到多图杀猫的文章很容易卡顿或失败。</p></blockquote><p>因此在自动化中，我导出了 HTML、Markdown、Textbundle，结果就是，尝试了各种方案，包括数次卸载重装、排查本地端口占用、卸载同步助手重装等，都无法成功在本地使用 <code>http://localhost:7026/reading/</code> 跳转文件，一直提示 404，<img loading=lazy src=https://user-images.githubusercontent.com/12758352/158979936-06fa9e67-8a68-4fd8-ab13-e854377e87e9.png alt>
，中间尝试了各种方案，一度怀疑是否只能使用坚果云才能用知识库功能。 结果发现全部卸载重装之后，坚果云也无法使用，中间联系简悦作者 <strong><a href=https://github.com/Kenshin>Kenshin</a></strong> 排查了很久，最终发现是因为同步助手无法识别 <code>.textbundle</code> 文件，导致不能正常建立索引。</p><p>这个问题有两种解决方案： 1. 放弃 Textbundle，改为使用离线 HTML 2. 通过文件规则，将 <code>.textbundle</code> 格式文件移动到其他目录下。我选择了第二种，原因就是离线 HTML 下载容易造成卡顿。不过遇到了另一个问题，那就是 <strong>Hazel</strong> 实在是太快了，在简悦刚开始创建 Textbundle 文件的时候，就已经把文件夹挪到了其他文件，导致此时简悦正在下载的图片找不到存放目录，引发大量报错。这个问题也卡了我不少时间，具体解决方案稍后单独介绍。</p><p>关于这部分，Kenshin 戏称说这个 issue 的长度可以在 2000 个 issue 里面排到前五，过程确实比较曲折，我中间走了非常多的弯路（不然也不会花掉一个周末的时间折腾），一度都想卸载简悦放弃了。有兴趣的同学可以看一下 <a href=https://github.com/Kenshin/simpread/issues/3554>自定义导出无法使用稍后读加载本地缓存文件 · Issue #3554 · Kenshin/simpread</a></p><p>第二个坑，这里原文作者也有提到，那就是稍后读的自动化流程，必须要在阅读模式下才可以，否则不生效， 参考： <a href=https://github.com/Kenshin/simpread/discussions/2362>部分操作方式加入稍后读时，无法触发自动化 · Discussion #2362 · Kenshin/simpread</a></p><h3 id=开放平台本地方案不需要跳过>开放平台（本地方案不需要，跳过）<a hidden class=anchor aria-hidden=true href=#开放平台本地方案不需要跳过>#</a></h3><h3 id=定制导出>定制导出<a hidden class=anchor aria-hidden=true href=#定制导出>#</a></h3><ul><li>这里一定要注意： 必须要跟原作者保持一致， <code>http://localhost:7026/reading/</code> 路径是简悦知识库必须的配置，否则会导致链接无法跳转以及稍后读无法使用本地缓存文件。</li><li>另一个问题就是简悦存在 bug，刷新完一定要检查一下配置是否符合预期</li></ul><h3 id=稍后读后台设置>稍后读后台设置<a hidden class=anchor aria-hidden=true href=#稍后读后台设置>#</a></h3><ul><li>基本保持一致，唯一一个小改动点就是 <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321225751.png alt=image-20220321225751261>
，因为我只用简悦来进行深度阅读，并不需要在这里查看标注，所以通常都是进入阅读模式。</li></ul><h3 id=md-文件自动移动保持一致使用-hazel-即可实际上后面我放弃了使用-hazel>MD 文件自动移动（保持一致，使用 Hazel 即可，实际上后面我放弃了使用 Hazel）<a hidden class=anchor aria-hidden=true href=#md-文件自动移动保持一致使用-hazel-即可实际上后面我放弃了使用-hazel>#</a></h3><p>至此，整个核心配置基本就已经完成了，我们实现的功能包括：</p><ol><li>添加标注自动保存 HTML、Markdown 到 output 文件夹</li><li>标注文件自动移动到 Logseq 目录中</li><li>稍后读自动加载本地缓存 HTML 文件 <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321230602.png alt=image-20220321230602224></li></ol><h2 id=优化点>优化点<a hidden class=anchor aria-hidden=true href=#优化点>#</a></h2><h3 id=textbundle永久保存方案maclinux-适用>Textbundle永久保存方案（Mac、Linux 适用）<a hidden class=anchor aria-hidden=true href=#textbundle永久保存方案maclinux-适用>#</a></h3><p>接着上面提到的，详细展开一下如何处理 Textbundle 文件。</p><p>首先，我一下子想到的就是利用 Hazel，新建一个规则就可以，当我实际上这么操作的时候，发现遇到了简悦写入图片时文件夹已经被移动导致报错问题。</p><p>此时，我的思路是，如果有办法能够延长移动文件夹的速度就好了。但简悦跟 Hazel 是相互不知道的，很可惜的是 Hazel 中也没有配置延迟操作或者定时任务这一功能，那么我们只能想办法自己动手了（当然这里还有一条路，希望简悦后续的文件写入能够先把图片下载完，之后再生成文件夹）。</p><p>我想到的解决方案是使用 *nix 系统的 cron 功能，不了解的小伙伴可以看一下 <a href=https://serverfault.com/questions/449651/why-is-my-crontab-not-working-and-how-can-i-troubleshoot-it>linux - Why is my crontab not working, and how can I troubleshoot it? - Server Fault</a> ，非常详细的介绍了 cron crontab 分别是什么， 如何使用，以及如何排查错误，受益匪浅。</p><p>这里需要做的事情非常简单，将所有后缀为 <code>.textbundle</code> 的文件移动到另一个目录中，实际操作起来并不简单，因为 <code>mv</code> 命令无法直接移动文件夹，而 textbundle 其实是一个文件夹而不是文件，包括了 json、图片以及 markdown，所以第一步就卡住了。我改为使用 <code>rsync</code> 来实现这个功能，可以很方便的把某个目录下所有的 Textbundle 移动到另一个目录。之后我们把源文件夹中的 Textbundle 文件删除。这里由于无法使用 Hazel 实现全部功能，那我干脆把移动 <code>@annotate.md</code> 文件的部分也放在自己的脚本里面实现了。完整的脚本文件如下：</p><pre tabindex=0><code>#!/bin/bash

cd 你的目录/SimpRead
mv output/*@annote.md  Logseq目录/SimpleRead/
rsync -axvP output/*.textbundle archieves（存放 Textbundle 的目录）
rm -rf output/*.textbundle
</code></pre><p>可以直接新建一个 <code>simpread.sh</code> 之后把上面的代码粘贴过去，记得把上面中文说明的部分都替换掉，同时为了手动执行方便，可以 <code>chmod +x simpread.sh</code> 一下。</p><p>然后就是使用 cron 让电脑自动执行这个脚本，这里可以使用 <a href=https://crontab.guru/#*/5_*_*_*_*>Crontab.guru - The cron schedule expression editor</a> 这个网站调试一下定时任务，比如我目前的配置是每隔 5 分钟执行一次脚本。注意不能执行太频繁，否则一样会遇到简悦下载出错（5 分钟也不能保证完全不出错，理论上间隔越久，出错概率越小）。</p><p>具体的添加步骤（我是 Mac，以下请在命令行中执行）</p><pre tabindex=0><code> export EDITOR=&#39;vi&#39; (不是必须)
 crontab -e
 
 然后输入
 */5 * * * * /bin/sh 你的简悦目录/SimpRead/simpread.sh
 之后输入 :wq 保存即可
</code></pre><p>提示： <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321232144.png alt=image-20220321232140468></p><p>就代表定时任务添加成功，可以把 Hazel 卸载掉了。</p><h3 id=快速进入稍后读>快速进入稍后读<a hidden class=anchor aria-hidden=true href=#快速进入稍后读>#</a></h3><p>看到简悦同步助手里面有如何快速打开稍后读的方式，参见： <a href="http://ksria.com/simpread/docs/#/%E7%A8%8D%E5%90%8E%E8%AF%BB?id=%E5%88%9B%E5%BB%BA%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F">稍后读</a> ，我就琢磨了一下，感觉效率还可以再提高一下。</p><h3 id=配置快捷方式>配置快捷方式<a hidden class=anchor aria-hidden=true href=#配置快捷方式>#</a></h3><p>文档中把快捷方式跟独立窗口分开成两步，实际上 Chrome 浏览器支持直接创建一个独立窗口的 PWA 应用（关于 PWA，参考： <a href=https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps>Progressive web apps (PWAs) | MDN</a>）。</p><p>打开稍后读： <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321232814.png alt=image-20220321232814407></p><p>选择独立窗口：</p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321232832.png alt=image-20220321232832834></p><p>然后你可以在用户目录下找到它</p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321232955.png alt=image-20220321232955685></p><p>也可以通过 Alfred 或者 Spotlight 找到它</p><p><img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321233044.png alt=image-20220321233044890></p><h3 id=manico-配置快速跳转>Manico 配置快速跳转<a hidden class=anchor aria-hidden=true href=#manico-配置快速跳转>#</a></h3><p>这里不得不强推一个效率软件了，官方网站： <a href=https://manico.im/>Manico - macOS 下的快速 App 切换器</a></p><p>基本上可以说这个软件是我目前每天使用频率最高的软件，应该没有之一，大概是 18 年左右 25￥购入。它的主要作用就是快速切换软件，比如你可以配置 option+1 打开 Chrome，option+2 打开微信等等，而且再次点击快捷键可以隐藏该软件，能够极大的节约软件切换的时间。这虽然是一款付费软件，但绝对是我在 Mac 上买过的最物超所值的软件。</p><p>核心配置：快速隐藏应用 <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321233606.png alt=image-20220321233606404></p><p>如何配置稍后读快速打开隐藏： <img loading=lazy src=https://learner.oss-cn-hangzhou.aliyuncs.com/img/20220321233522.png alt=image-20220321233522695></p><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>我一般的处理流程是手机浏览公众号或者 RSS 初筛到 Cubox，之后电脑上打开 Cubox，跳转到简悦进行深度阅读，添加标注，同步到 Logseq，之后进行定期整理。</p><p>这样，整个从文章到标注，到 Logseq 整理的过程就打通了。简悦作为一个稍后读软件，最大的亮点就是作为一个粘合剂，可以很好地跟各种笔记类软件打通，称为知识管理工作流中不可或缺的一部分，把浏览阅读到的信息和知识真正的经过深度阅读，让它有机会融入到已有的知识体系中，内化为自己的东西，就这一点已经远远超越了 Evernote、Cubox、Pinbox 等同类剪藏产品。</p><p>不过简悦问题也很明显，太极客了，配置使用成本巨高无比，我身为一个程序员，都好几次尝试无果弃坑了，个人感觉它的功能已经足够强大了，希望作者能够多花点心思在交互跟实际使用体验上，真的不需要再加那么多新功能了，适当的做减法非常有必要。希望我的踩坑经历能够对你有一些帮助。</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/%E7%AE%80%E6%82%A6/>简悦</a></li><li><a href=http://localhost:1313/tags/logseq/>Logseq</a></li><li><a href=http://localhost:1313/tags/pkm/>PKM</a></li><li><a href=http://localhost:1313/tags/%E7%A8%8D%E5%90%8E%E8%AF%BB/>稍后读</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/utilities/logseq%E7%B3%BB%E5%88%97%E4%B9%8Bgit%E5%90%8C%E6%AD%A5/><span class=title>«</span><br><span>Logseq 系列之 Git 同步</span>
</a><a class=next href=http://localhost:1313/posts/%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94/><span class=title>»</span><br><span>万物互联</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Samwei12's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>